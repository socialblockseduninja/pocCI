(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{573:function(e,t,o){"use strict";o.d(t,"i",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"d",(function(){return c})),o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return p})),o.d(t,"g",(function(){return m})),o.d(t,"h",(function(){return g})),o.d(t,"f",(function(){return b})),o.d(t,"e",(function(){return f}));var i=o(450),n=o(536),s=o(483);const r=5,a=7,c=10,l=300,p=c+120,h="cubic-bezier(0.165, 0.84, 0.44, 1)",d=Object(i.d)("0%{opacity:0;transform:translateY(20px);}30%{opacity:1;}100%{opacity:1;transform:translateY(0);}"),m=Object(i.c)("div",{target:"e1d2cwfh0"})("padding:0 ",r,"px;");var u={name:"1fcc2f6",styles:"box-shadow:0 2px 8px 0 rgba(35,47,53,0.2);"};const g=Object(i.c)("div",{target:"e1d2cwfh1"})("position:relative;height:",Object(i.e)("height"),"px;width:",340,"px;max-width:100%;padding-bottom:",c,"px;",s.b.className,"{height:",120,"px;",({theme:e})=>e.isMobile&&u,";}",n.a.className,"{animation:",d," 0.25s ",h,";}"),b=Object(i.c)("div",{target:"e1d2cwfh2"})("box-sizing:border-box;position:absolute;bottom:",c,"px;width:100%;backface-visibility:hidden;transform-origin:top center;transition:transform ",l,"ms ",h,";",({position:e})=>2===e&&Object(i.b)("transform:translate3d(0,-",a,"px,0) scale(0.95);")," ",({position:e})=>3===e&&Object(i.b)("transform:translate3d(0,-",2*a,"px,0) scale(0.9);")," ",({position:e,expanded:t})=>2===e&&t&&Object(i.b)("transition-delay:150ms;transform:translate3d(0,-",p,"px,0) scale(1);")," ",({position:e,expanded:t})=>3===e&&t&&Object(i.b)("transition-delay:150ms;transform:translate3d(0,-",2*p,"px,0) scale(1);")),f=Object(i.c)("div",{target:"e1d2cwfh3"})("padding-top:",c,"px;:after{content:'';clear:both;display:table;}",n.b.className,"{transition:opacity ",l/1.5,"ms ",h,";",({expandAnimationInProgress:e})=>e&&Object(i.b)("transition-delay:",l,"ms;"),"}")},651:function(e,t,o){"use strict";o.d(t,"b",(function(){return b}));var i=o(451),n=o(658),s=o(10),r=o(2),a=o(9),c=o(61),l=o(8),p=o(5),h=o(59),d=o(6),m=o(163),u=o(155),g=o(519);const b=(e,t,o)=>{const{officeHoursResponse:i}=e;return Object.assign({},e,t,o,{onOpen:()=>{const{conversation:o,part:i}=e;t.onOpen(o.id,i.id)},onConversationRead:()=>{t.onConversationRead(e.conversation.id)},onComposerOrFormInputClick:()=>{t.onComposerOrFormInputClick(e.conversation.id)},onReactionSelect:o=>{t.onReactionSelect(e.conversation.id,o)},onClose:()=>{const{conversation:o}=e;t.onClose(o.id)},onSuggestionClicked:o=>{const{conversation:n}=e,s=Object(g.c)(n);t.onSuggestionClicked(n,o,s,i)},setComposerSuggestionsDismissed:()=>{t.setComposerSuggestionsDismissed(e.conversation.id)}})};t.a=Object(i.connect)(e=>{const{isPresent:t}=e.user,{name:o,userConversationAttachmentsEnabled:i,userConversationGifsEnabled:n}=e.app,{partId:r}=e.message,c=Object(h.a)(e)[0],l=a.a.isMobileBrowser();let p=void 0!==r?c.parts.find(e=>e.id===r):(e=>e.readAt?Object(d.r)(e):Object(d.b)(e))(c),{messageType:m}=p||{};m=m||"adminReply",p=Object.assign({},p,{messageType:m});const u=Object(s.l)(e),{upfrontEmailCollectorShowing:b}=e.app.upfrontEmailCollection;return{appName:o,conversation:c,conversationSuggestions:Object(g.a)(e),part:p,userIsPresent:t,isMobile:l,showUploadButton:i,showGifButton:n,shouldShowUpfrontEmailComposer:u,isUpfrontEmailComposerShowing:b,officeHoursResponse:e.app&&e.app.officeHoursResponse}},e=>({onOpen:(t,o)=>{e(Object(c.b)(t,o)),e(Object(c.c)(t,o))},onClose:()=>{e(Object(c.a)())},onConversationRead:t=>{e(Object(p.n)(r.b,t))},onComposerOrFormInputClick:t=>{e(Object(c.a)()),e(Object(l.f)(t)),e(Object(p.l)(r.b,t))},onReactionSelect:(t,o)=>{e(Object(p.k)(r.b,t,o,!1))},onSuggestionClicked:(t,o,i,n)=>{e(Object(m.a)(r.b,t,o,!1,i,!0,n))},setComposerSuggestionsDismissed:t=>{e(Object(u.b)(t))}}),b)(n.a)},658:function(e,t,o){"use strict";var i=o(453),n=o.n(i),s=o(449),r=o.n(s),a=o(667),c=o(575),l=o(32),p=o(150),h=o(518),d=o(520),m=o(469),u=o(450),g=o(496);const b=Object(u.d)("0%{opacity:0;}70%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}"),f=Object(u.c)("div",{target:"enffyqv0"})("position:relative;box-sizing:border-box;padding:17px 20px;margin-top:5px;width:100%;height:",Object(u.f)("chatComposerHeightPx"),"px;background-color:",Object(u.f)("inputBackground"),";border-radius:",Object(u.f)("notificationBorderRadiusPx"),"px;border:none;font-size:14px;cursor:pointer;color:",Object(u.f)("inputPlaceholder"),";box-shadow:0 1px 6px rgba(0,0,0,0.06),0 2px 32px rgba(0,0,0,0.16);animation:",b," 750ms ease;",({theme:e,useBorderlessAvatarOffset:t})=>e.isLeftAlign&&t&&Object(u.b)("margin-left:",-e.borderlessAvatarOffsetWidthPx,"px;width:calc(100% + ",e.borderlessAvatarOffsetWidthPx,"px);")),v=Object(u.c)("span",{target:"enffyqv1"})({name:"1rju6wc",styles:"display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:140px;line-height:18px;"}),y=Object(u.c)("div",{target:"enffyqv2"})({name:"1cp2t9f",styles:"position:absolute;top:0;right:18px;"}),O=Object(u.c)("span",{target:"enffyqv3"})({name:"pctu5d",styles:"position:relative;float:left;display:inline-block;cursor:pointer;opacity:0.8;transition:opacity 200ms ease;height:51px;margin-top:2px;&:hover{opacity:1;}&:before{position:absolute;top:20px;background-position:center;}svg{position:absolute;top:18px;}"},";width:",18,"px;padding-left:",9,"px;padding-right:",9,"px;svg{height:18px;width:18px;}svg path{fill:",Object(u.f)("grey"),";}&:before{top:18px;}"),C=Object(u.c)(g.a,{target:"enffyqv4"})({name:"g6u7x8",styles:"right:18px;"}),S=Object(u.c)(g.c,{target:"enffyqv5"})({name:"1yphczb",styles:"&:before{top:18px;}"}),x=Object(u.c)(g.j,{target:"enffyqv6"})({name:"1yphczb",styles:"&:before{top:18px;}"});class mobile_chat_MobileChat extends s.Component{constructor(...e){var t,o,i;super(...e),i=e=>{e.stopPropagation(),this.props.onClose()},(o="handleDismissClick")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}renderComposer(){const{firstName:e}=this.props.part.author;return r.a.createElement(f,{useBorderlessAvatarOffset:!0},r.a.createElement(v,{className:"chat-composer-placeholder"},Object(l.e)("reply_to_name",{name:e})),r.a.createElement(C,null,r.a.createElement(S,null,r.a.createElement(d.a,null)),r.a.createElement(x,null,r.a.createElement(h.a,null))))}renderAttributeCollectorCard(){const{part:e,frameWindow:t}=this.props;return r.a.createElement(c.a,{part:e,hasAvatar:!1,isBorderless:!0,isReplyType:!0,frameWindow:t,key:Object(p.a)(JSON.stringify(e))})}renderDismissButton(){return r.a.createElement(m.b,{onClick:this.handleDismissClick,"aria-label":Object(l.e)("clear")},r.a.createElement("span",null,Object(l.e)("clear")))}renderReplyType(){const{part:e}=this.props;switch(e.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}}renderChatCardGroup(){const{appName:e,part:t,frameWindow:o}=this.props;return r.a.createElement(a.a,{appName:e,part:t,isBorderless:!0,isMobile:!0,frameWindow:o})}render(){const{composerState:e,onComposerOrFormInputClick:t}=this.props;return r.a.createElement(m.a,{className:"intercom-chat",onClick:t},this.renderChatCardGroup(),this.renderDismissButton(),e.visible&&this.renderReplyType())}}var w=o(456),k=o(458),j=o(452);var E={name:"145vpms",styles:"left:0;right:auto;"};const P=Object(u.c)(k.a,{target:"e1g9h0if0"})("z-index:",Object(j.m)(),";position:fixed;max-width:360px;width:calc(100% - 25px);right:0;",({height:e})=>Object(u.b)("bottom:0;height:",e+20,"px;")," ",({theme:e})=>e.isLeftAlign&&E," ",({theme:e,height:t})=>e.isLauncherEnabled&&Object(u.b)("height:",t+e.launcherOffsetBottomPaddingPx+20,"px;"));var T=o(491);function _(e){const{appName:t,part:o,onClose:i,onComposerOrFormInputClick:n,composerState:a}=e,[c,p]=Object(s.useState)(0),h=({height:e})=>p(e);return r.a.createElement(P,{frameName:"intercom-chat-frame",height:c,title:`Intercom live chat ${Object(l.e)("message")}`},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{onChange:h},r.a.createElement(mobile_chat_MobileChat,{appName:t,part:o,onClose:i,composerState:a,onComposerOrFormInputClick:n,frameWindow:e})),r.a.createElement(T.a,{appWindow:e})))}var R=o(489),I=o(465),N=o(490),B=o(508),M=o(23),F=o(649),H=o(579),D=o(0),A=o(472),q=o(514);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function W(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class note_Note extends s.Component{constructor(...e){super(...e),W(this,"state",{isFooterVisible:!0,isScrolled:!1}),W(this,"handleScroll",e=>{const{isFooterVisible:t}=this.state,o=Object(M.l)(e.target);this.setState({isFooterVisible:t||o<=this.getFooterHeight(),isScrolled:e.target.scrollTop>0}),Object(q.a)(e)}),W(this,"handleScrollable",e=>{const t=e.scrollHeight-e.clientHeight,o=this.state.isFooterVisible||void 0===this.props.reactionsReply||t<=this.getReactionsVisibilityThreshold();this.setState({isFooterVisible:o})}),W(this,"addClickedComposerMetric",()=>{const{message:{id:e},conversationId:t}=this.props;Object(D.e)("clicked","composer","in_app","from_full",{message_type:"note",message_id:e,conversation_id:t})}),W(this,"handleComposerClick",()=>{this.addClickedComposerMetric(),this.props.onComposerClick()})}getReactionsVisibilityThreshold(){return this.getFooterHeight()+20}getFooterHeight(){return this.footer?this.footer.clientHeight:0}renderFooter(){const{showUploadButton:e,showGifButton:t,showReplyToButton:o}=this.props;return o?r.a.createElement(H.a,{onClick:this.handleComposerClick}):r.a.createElement(A.c,{className:"intercom-note-composer",onClick:this.handleComposerClick,"aria-label":Object(l.e)("open_conversation_and_reply")},r.a.createElement(g.f,null,Object(l.e)("reply_to_conversation")),r.a.createElement(g.a,null,t?r.a.createElement(g.e,null,r.a.createElement(F.a,null)):null,r.a.createElement(g.c,null,r.a.createElement(d.a,null)),e?r.a.createElement(g.j,null,r.a.createElement(h.a,null)):null))}renderReactionPicker(){const{reactionsReply:e,onReactionSelect:t}=this.props;return r.a.createElement(B.a,V({},e,{onReactionSelect:t}))}render(){const{appName:e,message:t,reactionsReply:o,onClose:i,frameWindow:n,showReplyToButton:s}=this.props,{isScrolled:a,isFooterVisible:c}=this.state,{author:p,lastActiveAt:h,body:d}=t;return r.a.createElement(A.e,{className:"intercom-note",isScrolled:a},r.a.createElement(N.a,{appName:e,isReplyStyle:!1,author:p,lastActiveAt:h},r.a.createElement(A.b,{className:"intercom-anchor",onClick:i,"aria-label":Object(l.e)("close")}," "),r.a.createElement(A.a,{showReplyToButton:s},r.a.createElement(R.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},r.a.createElement(I.a,{blocks:d,zoomable:!0,frameWindow:n}))),r.a.createElement(A.d,{ref:e=>this.footer=e,isFooterVisible:c,showReplyToButton:s},o?this.renderReactionPicker():this.renderFooter())))}}note_Note.propTypes={appName:n.a.string.isRequired,message:n.a.shape({id:n.a.string.isRequired,author:n.a.object.isRequired,body:n.a.array.isRequired,lastActiveAt:n.a.instanceOf(Date)}).isRequired,conversationId:n.a.string,reactionsReply:n.a.shape({reactionIndex:n.a.number,reactionSet:n.a.array.isRequired}),onClose:n.a.func,onComposerClick:n.a.func,onReactionSelect:n.a.func,frameWindow:n.a.object,showUploadButton:n.a.bool,showGifButton:n.a.bool,showReplyToButton:n.a.bool},note_Note.defaultProps={showUploadButton:!0,showGifButton:!0};var z={name:"fnfiys",styles:"right:0;left:0;margin:0 auto;"};const L=Object(u.c)(k.a,{target:"e1o2sc8n0"})("position:fixed;bottom:",Object(j.j)(),"px;right:",Object(u.f)("horizontalPaddingPx"),"px;width:342px;z-index:",Object(j.m)(1),";box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);",({theme:e})=>e.isLeftAlign&&Object(u.b)("left:",e.horizontalPaddingPx,"px;right:auto;")," ",({theme:e})=>e.isMobileSize&&z);function U(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class note_NoteFrame extends s.Component{constructor(...e){super(...e),U(this,"state",{height:0}),U(this,"handleHeightChange",({height:e})=>{this.setState({height:e})})}render(){const{conversationId:e,appName:t,message:o,reactionsReply:i,showUploadButton:n,showGifButton:s,onComposerClick:a,onReactionSelect:c,showReplyToButton:p,onClose:h}=this.props,{height:d}=this.state;return r.a.createElement(L,{style:{height:d},frameName:"intercom-note-frame",title:`Intercom live chat ${Object(l.e)("message")}`},l=>r.a.createElement("span",null,r.a.createElement(w.a,{id:"note-frame",key:"note-frame",onChange:this.handleHeightChange},r.a.createElement(note_Note,{frameWindow:l,conversationId:e,appName:t,message:o,reactionsReply:i,showUploadButton:n,showGifButton:s,onClose:h,onComposerClick:a,onReactionSelect:c,showReplyToButton:p})),r.a.createElement(T.a,{appWindow:l})))}}var G=o(636);function Y(){return r.a.createElement(G.a,{focusable:"false","aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16"},r.a.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))}var $=o(470);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function K(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class pointer_Pointer extends s.Component{constructor(...e){super(...e),K(this,"node",void 0),K(this,"state",{isFooterVisible:!0,isScrolled:!1}),K(this,"footer",void 0),K(this,"handleScroll",e=>{const{isFooterVisible:t}=this.state,o=Object(M.l)(e.target);this.setState({isFooterVisible:t||o<=this.getFooterHeight(),isScrolled:e.target.scrollTop>0})}),K(this,"handleScrollable",e=>{const t=e.scrollHeight-e.clientHeight,o=this.state.isFooterVisible||void 0===this.props.reactionsReply||t<=this.getReactionsVisibilityThreshold();this.setState({isFooterVisible:o})}),K(this,"isReplyDisabled",()=>{const{replyType:e}=this.props.message;return"disabled"===e}),K(this,"addClickedComposerMetric",()=>{const{message:{id:e},conversationId:t}=this.props;Object(D.e)("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:e,conversation_id:t})}),K(this,"handleComposerClick",()=>{this.addClickedComposerMetric(),this.props.onComposerClick()})}getReactionsVisibilityThreshold(){return this.getFooterHeight()+20}getFooterHeight(){return this.footer?this.footer.clientHeight:0}renderFooter(e){return this.isReplyDisabled()?null:r.a.createElement($.d,{ref:e=>this.footer=e,isFooterVisible:this.state.isFooterVisible},e?this.renderReactionPicker():this.renderChatComposer())}renderChatComposer(){return r.a.createElement($.c,{className:"intercom-pointer-composer",onClick:this.handleComposerClick},r.a.createElement("span",null,r.a.createElement(Y,null)),r.a.createElement(g.f,null,Object(l.e)("start_a_conversation")))}renderReactionPicker(){const{reactionsReply:e,onReactionSelect:t}=this.props;return r.a.createElement(B.a,X({},e,{onReactionSelect:t}))}render(){const{appName:e,message:t,reactionsReply:o,onClose:i,frameWindow:n}=this.props,{author:s,lastActiveAt:a,body:c}=t;return r.a.createElement($.e,{isInbox:!1,isScrolled:this.state.isScrolled,ref:e=>this.node=e,className:"intercom-pointer"},r.a.createElement(N.a,{appName:e,isReplyStyle:!1,author:s,lastActiveAt:a},r.a.createElement($.b,{onClick:i,"aria-label":Object(l.e)("close")}," "),r.a.createElement($.a,{intercomRepliesDisabled:this.isReplyDisabled()},r.a.createElement(R.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},r.a.createElement(I.a,{blocks:c,zoomable:!0,frameWindow:n}))),this.renderFooter(o)))}}var J=o(663);const Q=Object(u.c)(k.a,{target:"e1lu8yo70"})("z-index:",Object(j.m)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);");function Z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class pointer_PointerFrame extends s.PureComponent{constructor(...e){super(...e),Z(this,"state",{width:0,height:0}),Z(this,"handleDimensionFrameSize",({height:e,width:t})=>{this.setState({width:t,height:e})})}frameStyles(){const{width:e,height:t}=this.state;return{width:e,height:t,opacity:1}}render(){const{appName:e,appWindow:t,message:o,conversationId:i,onClose:n,reactionsReply:s,onComposerClick:a,onReactionSelect:c}=this.props;return r.a.createElement(J.a,{appWindow:t,targetSelector:o.pointerSelector,childDimensions:this.frameStyles()},r.a.createElement(Q,{style:this.frameStyles(),frameName:"intercom-pointer-frame",title:`Intercom live chat ${Object(l.e)("pointer")}`},()=>r.a.createElement(w.a,{id:"pointer-frame",key:"pointer-frame",onChange:this.handleDimensionFrameSize},r.a.createElement(pointer_Pointer,{appName:e,message:o,conversationId:i,reactionsReply:s,frameWindow:t,onComposerClick:a,onReactionSelect:c,onClose:n}))))}}var ee=o(631),te=o(461),oe=o(661),ie=o(566),ne=o.n(ie),se=o(567),re=o.n(se),ae={name:"siiwv4",styles:"&:hover .story-dismiss-button{opacity:1;}"};const ce=Object(u.c)("div",{target:"e18fd67o0"})("z-index:",Object(j.m)(1),";font-size:13px;font-family:",Object(u.f)("fontSansSerif"),";color:",Object(u.f)("bodyText"),";position:relative;",({theme:e,standalone:t})=>t&&Object(u.b)("position:fixed;bottom:",e.verticalPaddingPx,"px;right:",e.horizontalPaddingPx,"px;")," ",({isVideoLoaded:e})=>e&&ae," ",({theme:e})=>e.isLauncherEnabled&&Object(u.b)("bottom:",e.verticalPaddingPx+e.launcherOffsetBottomPaddingPx,"px;"));var le={name:"1c9b7w0",styles:"width:240px;height:180px;margin-left:10px;"},pe={name:"dxx3wj",styles:"margin-top:42px;"},he={name:"ajzub1",styles:"margin-top:54px;"};const de=Object(u.c)("div",{target:"e18fd67o1"})("position:relative;overflow:hidden;box-shadow:0px 2px 16px rgba(0,0,0,0.14),0px 1px 6px rgba(0,0,0,0.06);border-radius:5px;transition:transform 150ms ease,width 200ms ease,height 200ms ease,margin 200ms;transform-origin:bottom right;width:340px;height:255px;",({standalone:e})=>e&&he," ",({standalone:e,isExpanded:t})=>e&&t&&pe," ",({theme:e})=>e.isMobileSize&&le),me=Object(u.c)("div",{target:"e18fd67o2"})("position:absolute;top:0;/* @noflip */ right:0;display:block;opacity:0;transition:opacity 150ms ease;span{display:block;background-color:#5d6c80;opacity:0.8;color:",Object(u.f)("white"),";font-size:13px;height:32px;line-height:32px;padding:0 16px 0 16px;border-radius:16px;cursor:pointer;background-position:center;",Object(j.b)(ne.a,re.a,"8px","8px"),";&:hover{opacity:1;}}"),ue=Object(u.c)("div",{target:"e18fd67o3"})("position:absolute;width:100%;z-index:",Object(j.m)(1),";top:0;left:0;right:0;bottom:0;cursor:pointer;"),ge=Object(u.c)("div",{target:"e18fd67o4"})({name:"maq7xh",styles:".chat-composer{margin-top:10px;}&.video-composer-enter{.chat-composer{display:block;height:0;opacity:0;overflow:hidden;padding-top:0;padding-bottom:0;margin-top:0;}.composer-placeholder,.composer-buttons{opacity:0;transition:opacity 200ms ease;transition-delay:200ms;}}&.video-composer-enter-active{.chat-composer{opacity:1;height:52px;padding-top:17px;padding-bottom:17px;transition-property:height,opacity,padding,margin;transition-duration:200ms;transition-timing-function:ease;margin-top:10px;}.composer-placeholder,.composer-buttons{opacity:1;}}"});var be=o(576);function fe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class story_Story extends s.Component{constructor(...e){super(...e),fe(this,"video",void 0),fe(this,"state",{isExpanded:!1,isVideoLoaded:!1}),fe(this,"handleOverlayClick",()=>{this.state.isVideoLoaded&&this.setState({isExpanded:!0})}),fe(this,"handleVideoLoaded",()=>{this.setState({isVideoLoaded:!0})})}renderDismissButton(){return this.props.standalone?r.a.createElement(me,{className:"story-dismiss-button",onClick:this.props.onClose},r.a.createElement("span",null)):null}renderOverlay(){return this.state.isExpanded?null:r.a.createElement(ue,{className:"story-overlay",onClick:this.handleOverlayClick})}renderComposer(){const{part:e,onComposerOrFormInputClick:t}=this.props,{firstName:o}=e.author;return r.a.createElement(te.CSSTransition,{classNames:"video-composer",timeout:{enter:400,exit:400}},r.a.createElement(ge,null,r.a.createElement(f,{className:"chat-composer",onClick:t,"aria-label":Object(l.e)("open_conversation_and_reply"),useBorderlessAvatarOffset:!1},r.a.createElement(v,{className:"composer-placeholder"},Object(l.e)("reply_to_name",{name:o})),r.a.createElement(y,{className:"composer-buttons"},r.a.createElement(O,null,r.a.createElement(d.a,null)),r.a.createElement(O,null,r.a.createElement(h.a,null))))))}renderSuggestions(){const{onSuggestionClicked:e,setComposerSuggestionsDismissed:t,conversationSuggestions:o,conversation:i}=this.props;return r.a.createElement(be.a,{conversation:i,conversationSuggestions:o,setComposerSuggestionsDismissed:t,onClick:e})}renderResponseArea(){return this.state.isExpanded&&this.props.showResponseArea?this.props.conversationSuggestions?this.renderSuggestions():this.renderComposer():null}render(){const{part:{body:e},autoPlay:t,standalone:o}=this.props,{isExpanded:i,isVideoLoaded:n}=this.state,{url:s,captions:a,thumbnailUrl:c}=e[0];return r.a.createElement(ce,{standalone:o,isVideoLoaded:n},this.renderDismissButton(),r.a.createElement(de,{standalone:o,isExpanded:i},this.renderOverlay(),r.a.createElement(oe.a,{srcUrl:s,autoPlay:t,onVideoLoaded:this.handleVideoLoaded,captions:a,thumbnailUrl:c})),r.a.createElement(te.TransitionGroup,null,this.renderResponseArea()))}}fe(story_Story,"defaultProps",{standalone:!1,onClose:()=>{},showResponseArea:!0,autoPlay:!1});const ve=Object(u.c)(k.a,{target:"elkwj510"})("z-index:",Object(j.m)(),";position:fixed;right:0;bottom:0;width:100vw;height:100vh;");function ye(e){const{conversation:t,standalone:o,part:i,onClose:n,onComposerOrFormInputClick:s,conversationSuggestions:a,onSuggestionClicked:c,setComposerSuggestionsDismissed:l}=e;return r.a.createElement(ve,{frameName:"intercom-story-frame"},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(story_Story,{conversation:t,standalone:o,part:i,onClose:n,onComposerOrFormInputClick:s,conversationSuggestions:a,onSuggestionClicked:c,setComposerSuggestionsDismissed:l}),r.a.createElement(T.a,{appWindow:e})))}var Oe=o(451),Ce=o(2),Se=o(657),xe=o(659),we=o(6);const ke=Object(u.c)("div",{target:"e19nv0ic0"})({name:"vavd1c",styles:"padding-top:0;/* @noflip */ padding-left:45px;"});function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Pe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_conversation_composer_BorderlessConversationComposer extends s.PureComponent{constructor(...e){super(...e),Pe(this,"ref",void 0),Pe(this,"setRef",e=>{this.ref=e})}componentDidMount(){Object(we.o)(this.props.conversation)&&this.handleShow()}componentDidUpdate(e){!Object(we.o)(e.conversation)&&Object(we.o)(this.props.conversation)?this.handleShow():Object(we.o)(e.conversation)&&!Object(we.o)(this.props.conversation)&&this.handleHide()}handleShow(){this.props.handleComposerResize(this.getHeight())}handleHide(){this.props.onHide()}getHeight(){return this.ref?this.ref.clientHeight:0}render(){const e=this.props,{conversation:t,handleComposerResize:o}=e,i=Ee(e,["conversation","handleComposerResize"]);return Object(we.o)(t)?r.a.createElement(ke,{ref:this.setRef},r.a.createElement(xe.a,je({isBorderless:!0,conversation:t,onHeightChange:o},i))):null}}var Te=o(645),_e=o(600),Re={name:"1xzanuf",styles:"margin-right:0;"},Ie={name:"1v8x7dw",styles:"overflow:auto;"};const Ne=Object(u.c)("div",{target:"e1my0o560"})("overflow-anchor:none;max-height:100%;padding-top:10px;padding-right:10px;margin-right:-10px;",({enabledScroll:e})=>e&&Ie," ",({enabledScroll:e,visibleScrollbars:t})=>e&&t&&Re),Be=Object(u.c)("div",{target:"e1my0o561"})({name:"l57rop",styles:"padding-bottom:10px;"});var Me=o(20);function Fe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_conversation_body_BorderlessConversationBody extends s.Component{constructor(...e){super(...e),Fe(this,"isPartBeingAddedTimeout",void 0),Fe(this,"firstRenderTimeout",void 0),Fe(this,"borderlessBodyNode",void 0),Fe(this,"visibleScrollbarsInOs",0!==Object(_e.a)()),Fe(this,"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:this.props.frameNode.offsetTop,adminWasTyping:!1}),Fe(this,"recalculateOffsets",()=>{this.setState({frameOffsetTop:this.props.frameNode.offsetTop},()=>Object(M.z)(this.borderlessBodyNode))}),Fe(this,"handleScroll",e=>{this.state.isPartBeingAdded||(this.setState({bottomScrollOffset:Object(M.f)(this.borderlessBodyNode)}),Object(q.a)(e))})}componentDidMount(){Object(Me.a)(this.recalculateOffsets),this.firstRenderTimeout=setTimeout(()=>{Object(M.z)(this.borderlessBodyNode)},300)}componentDidUpdate(e){const{frameOffsetTop:t}=this.state,{conversation:o,frameNode:i}=this.props,{conversation:n}=e,s=o.parts.length!==n.parts.length,r=Object(Te.h)(o);(s||r&&!this.state.adminWasTyping)&&(Object(M.z)(this.borderlessBodyNode),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),clearTimeout(this.isPartBeingAddedTimeout),this.isPartBeingAddedTimeout=setTimeout(()=>{this.setState({isPartBeingAdded:!1}),Object(M.z)(this.borderlessBodyNode)},300)),i.offsetTop!==t&&this.setState({frameOffsetTop:i.offsetTop},()=>{this.setState({bottomScrollOffset:Object(M.f)(this.borderlessBodyNode)})}),r!==this.state.adminWasTyping&&this.setState({adminWasTyping:r})}componentWillUnmount(){clearTimeout(this.isPartBeingAddedTimeout),clearTimeout(this.firstRenderTimeout),Object(Me.f)(this.recalculateOffsets)}getStyle(){const{borderlessNode:e,composerHeight:t}=this.props,o=e&&e.clientHeight,{frameOffsetTop:i}=this.state;if(!o||i)return;const n=o/100,s=100-10/n,r=`linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) ${100-76/n}%, rgba(0, 0, 0, ${Math.max(1-this.state.bottomScrollOffset/100*5,0)}) ${s}%)`;return{maxHeight:`${o-t-20}px`,WebkitMaskImage:r,MaskImage:r}}render(){const e=0===this.state.frameOffsetTop;return r.a.createElement(Ne,{style:this.getStyle(),ref:e=>this.borderlessBodyNode=e,onScroll:this.handleScroll,enabledScroll:e,visibleScrollbars:this.visibleScrollbarsInOs},this.props.children())}}var He=o(669),De=o(500),Ae=o(499),qe=o(571),Ve=o(640),We=o(642),ze=o(509);const Le=Object(u.d)("0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}"),Ue={name:"1lh3dwn",styles:"opacity:1;transform:translateY(0);"},Ge=({theme:e})=>Object(u.b)("transform:translateY(4px);opacity:0;transition:all 120ms ease-out 80ms;span{display:block;background-color:#67788f;color:",e.white,";font-size:13px;height:32px;line-height:32px;padding:0 8px;border-radius:16px;cursor:pointer;background-position:center;&:hover{background-color:darken(#67788f,5%);}}",Ye.className,":hover &{",Ue,"}"),Ye=Object(u.c)("div",{target:"es6hgh10"})("z-index:",Object(j.m)(),";position:absolute;right:0;bottom:0;width:360px;max-height:100%;outline-offset:-5px;",({theme:e,hasComposer:t})=>t&&Object(u.b)("animation:",(({theme:e})=>Object(u.d)("0%{transform:translateY(",e.borderlessComposerHeightPx,"px);}20%{transform:translateY(",e.borderlessComposerHeightPx,"px);}70%{transform:translateY(",e.borderlessComposerHeightPx,"px);}100%{transform:translateY(0);}"))({theme:e})," 750ms ease;")," ",ze.i.className,",",Ve.c.className,",",We.a.className,"{position:absolute;bottom:21px;box-shadow:",Object(u.f)("notificationBoxShadow"),";border-radius:100%;}"),$e=Object(u.c)("div",{target:"es6hgh11"})("position:absolute;right:0;bottom:0;width:",Object(u.f)("borderlessConversationWidthPx"),"px;padding:10px;padding-top:50px;animation:",Le," 500ms ease;",({theme:e})=>e.isLeftAlign&&Object(u.b)("width:",e.borderlessConversationWidthPx+e.borderlessAvatarOffsetWidthPx,"px;")),Xe=Object(u.c)("div",{target:"es6hgh12"})("z-index:",Object(j.m)(1),";position:absolute;top:0;width:",Object(u.f)("borderlessConversationWidthPx"),"px;height:40px;padding:0 10px;"),Ke=Object(u.c)("div",{target:"es6hgh13"})({name:"ln0qgx",styles:"padding-top:10px;position:relative;/* @noflip */ margin-left:45px;text-align:center;"});var Je={name:"whh5e5",styles:"opacity:1;"};const Qe=Object(u.c)("div",{target:"es6hgh14"})(Ge," position:absolute;top:10px;/* @noflip */ right:0;span{padding-right:16px;padding-left:16px;",Object(j.b)(ne.a,re.a,"8px","8px"),"}",({theme:e})=>e.tabNavigation&&Je);var Ze={name:"whh5e5",styles:"opacity:1;"};const et=Object(u.c)("div",{target:"es6hgh15"})(Ge," display:inline-block;span{padding:0 20px;}",({theme:e})=>e.tabNavigation&&Ze);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function ot(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_conversation_BorderlessConversation extends s.Component{constructor(...e){super(...e),ot(this,"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,headerHeight:50,partsHeight:0,suggestionsHeight:0,composerHeight:0,replyToButtonHeight:0}),ot(this,"handlePartsHeightChange",e=>{this.setState({partsHeight:e},this.handleHeightChange)}),ot(this,"setSuggestionsHeight",e=>{this.setState({suggestionsHeight:e},this.handleHeightChange)}),ot(this,"handleQuickRepliesHide",()=>{this.setState({suggestionsHeight:0},this.handleHeightChange)}),ot(this,"handleComposerShow",e=>{this.setState({composerHeight:e},this.handleHeightChange)}),ot(this,"handleComposerHide",()=>{this.setState({composerHeight:0},this.handleHeightChange)}),ot(this,"handleReplyToButtonShow",e=>{this.setState({replyToButtonHeight:e},this.handleHeightChange)}),ot(this,"handleClick",()=>{const{isEmojiPickerOpen:e,isGifPickerOpen:t}=this.state;e?this.setState({isEmojiPickerOpen:!1}):t&&this.setState({isGifPickerOpen:!1})}),ot(this,"handleDismissClick",e=>{e.stopPropagation(),this.addCloseMetric(),this.props.onClose();const t=Object(Ae.f)();t&&t.focus()}),ot(this,"handleEmojiPickerToggle",()=>{const e=!this.state.isEmojiPickerOpen;this.setState({isEmojiPickerOpen:e}),this.props.onPopoverToggle(e)}),ot(this,"handleGifPickerToggle",()=>{const e=!this.state.isGifPickerOpen;this.setState({isGifPickerOpen:e}),this.props.onPopoverToggle(e)}),ot(this,"handleViewMoreClick",()=>{this.addViewMoreMetric(),this.props.onViewMore()}),ot(this,"handleHeightChange",()=>{this.props.onHeightChange(this.getHeight())})}componentDidMount(){this.props.onOpen(),this.focusTrap=new De.a({document:this.props.frameWindow.document})}componentDidUpdate(e){const{conversation:t}=this.props;"all"===t.fetchState&&Object(we.a)(t)>Object(we.a)(e.conversation)&&this.addReplyMetric(t)}componentWillUnmount(){this.focusTrap&&this.focusTrap.restore()}getHeight(){const{headerHeight:e,partsHeight:t,composerHeight:o,suggestionsHeight:i,replyToButtonHeight:n}=this.state;return e+t+o+i+n+20}getStyle(){return{height:this.getHeight()}}hasComposer(){const{parts:e,composerState:t}=this.props.conversation;return"attribute_collector"===e[0].replyType||t.visible}shouldRenderHeader(){const{isEmojiPickerOpen:e,isGifPickerOpen:t}=this.state;return!(e||t)}addViewMoreMetric(){Object(D.e)("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})}addReplyMetric(){const{conversation:e}=this.props,t=Object(we.d)(e);Object(D.e)("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})}addCloseMetric(){Object(D.e)("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})}renderHeader(){return r.a.createElement(Xe,null,r.a.createElement(Ke,null,this.props.hasHistory?this.renderViewMoreButton():null,r.a.createElement(Qe,{onClick:this.handleDismissClick,"aria-label":Object(l.e)("dismiss")},r.a.createElement("span",null))))}renderViewMoreButton(){return r.a.createElement(et,{onClick:this.handleViewMoreClick},r.a.createElement("span",null,Object(l.e)("view_more")))}renderParts(){const{appName:e,userRole:t,conversation:o,onArticleCardClick:i,onReactionSelect:n,onRetry:s,frameWindow:a,conversationSuggestions:c}=this.props,{isEmojiPickerOpen:l,isGifPickerOpen:p}=this.state;return r.a.createElement(Se.a,{isBorderless:!0,isFaded:l||p,maxHeight:0,appName:e,userRole:t,conversation:o,frameWindow:a,onArticleCardClick:i,onHeightChange:this.handlePartsHeightChange,onReactionSelect:n,onRetry:s,conversationSuggestions:c})}renderSuggestions(){const{onSuggestionClicked:e,setComposerSuggestionsDismissed:t,conversationSuggestions:o,conversation:i}=this.props,n={conversation:i,setComposerSuggestionsDismissed:t,onClick:e,isBorderless:!0};return r.a.createElement(w.a,{onHeightChange:this.setSuggestionsHeight},r.a.createElement("div",null,r.a.createElement(qe.a,{errorText:"Something went wrong loading the suggestions",align:"center",style:{marginBottom:"10px"}},r.a.createElement(be.a,tt({},n,{conversationSuggestions:o})))))}renderFooter(){const{isEmojiPickerOpen:e,isGifPickerOpen:t}=this.state,{showReplyToButton:o,onComposerClick:i,conversation:n,frameWindow:s}=this.props;return o&&Object(we.o)(this.props.conversation)?r.a.createElement(H.a,{isBorderless:!0,onShow:this.handleReplyToButtonShow,onClick:i}):r.a.createElement(borderless_conversation_composer_BorderlessConversationComposer,{conversation:n,showEmojiPicker:e,showGifPicker:t,handleComposerResize:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:s})}render(){const{conversation:e,frameNode:t}=this.props,{composerHeight:o}=this.state;return r.a.createElement(Ye,{className:"intercom-borderless",style:this.getStyle(),onClick:this.handleClick,tabIndex:"-1",role:"region",ref:e=>this.borderlessNode=e,hasComposer:this.hasComposer()},this.shouldRenderHeader()?this.renderHeader():null,r.a.createElement($e,null,r.a.createElement(borderless_conversation_body_BorderlessConversationBody,{conversation:e,composerHeight:o,borderlessNode:this.borderlessNode,frameNode:t},()=>r.a.createElement(Be,null,this.renderParts(),this.renderSuggestions())),this.renderFooter()),r.a.createElement(T.a,{appWindow:this.props.frameWindow}))}}borderless_conversation_BorderlessConversation.propTypes={conversation:n.a.shape({id:n.a.string.isRequired,userParticipated:n.a.bool.isRequired,fetchState:n.a.oneOf(["summary","partial","all"]),parts:n.a.arrayOf(n.a.shape({id:n.a.string,replyType:n.a.oneOf(["text","attribute_collector"])})).isRequired,composerState:n.a.shape({visible:n.a.bool.isRequired}).isRequired}),conversationSuggestions:n.a.shape({prompt:n.a.any,suggestions:n.a.arrayOf(n.a.shape({uuid:n.a.string.isRequired,text:n.a.string.isRequired,preAction:n.a.string}))}),onSuggestionClicked:n.a.func,setComposerSuggestionsDismissed:n.a.func,appName:n.a.string.isRequired,userRole:n.a.string.isRequired,hasHistory:n.a.bool,alignment:n.a.string,onOpen:n.a.func.isRequired,onHeightChange:n.a.func.isRequired,onPopoverToggle:n.a.func.isRequired,onArticleCardClick:n.a.func.isRequired,onReactionSelect:n.a.func.isRequired,onRetry:n.a.func.isRequired,onViewMore:n.a.func.isRequired,onClose:n.a.func.isRequired,onComposerClick:n.a.func.isRequired,frameWindow:n.a.any.isRequired,showReplyToButton:n.a.bool,part:n.a.object,frameNode:n.a.object.isRequired};const it=Object(He.a)(borderless_conversation_BorderlessConversation);var nt=o(8),st=o(149),rt=o(39),at=o(5);var ct=o(54),lt=o(42);var pt=Object(Oe.connect)((e,t)=>{const{name:o}=e.app,{role:i}=e.user,{part:n,conversation:s}=t,{alignment:r}=Object(ct.a)(e),a=s.parts.filter(e=>e.createdAt>=n.createdAt);let{messageType:c}=a[0];c=c||"adminReply",a[0]=Object.assign({},a[0],{messageType:c});const l=a.length<s.parts.length;return{appName:o,userRole:i,conversation:Object.assign({},s,{parts:a}),hasHistory:l,alignment:r}},e=>({onOpen:t=>{e(function(e){return(t,o)=>{Object(rt.a)(e)(o()).userParticipated?t(Object(at.l)(Ce.b,e)).then(()=>{t({type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e})}):t({type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e})}}(t))},onRetry:(t,o)=>{e(Object(at.q)(Ce.b,t,o))},onReactionSelect:(t,o)=>{e(Object(at.k)(Ce.b,t,o,!1))},onArticleCardClick:(t,o)=>e(Object(st.e)(t,o,!1)),onViewMore:t=>{e(Object(nt.g)(t))},dismissConversation:t=>e(Object(lt.b)(Ce.b,[t]))}),(e,t,o)=>{const{conversation:i}=e,{id:n}=i,s={onOpen:()=>{t.onOpen(n)},onReactionSelect:e=>{t.onReactionSelect(n,e)},onRetry:e=>{t.onRetry(i,e)},onViewMore:()=>{t.onViewMore(n)},onClose:()=>{t.dismissConversation(n),o.onClose()}};return Object.assign({},e,t,o,s)})(it),ht={name:"n7pinj",styles:"min-height:350px;"};const dt=Object(u.c)(k.a,{target:"eqgwjwo0"})("z-index:",Object(j.m)(),";position:fixed;width:360px;",({theme:e})=>Object(u.b)("bottom:",e.verticalPaddingPx-e.borderlessIframePaddingPx,"px;right:",e.horizontalPaddingPx-e.borderlessIframePaddingPx,"px;max-height:calc(100% - ",e.verticalPaddingPx-e.borderlessIframePaddingPx,"px);")," ",({isPopoverOpen:e})=>e&&ht," ",({theme:e})=>e.isLeftAlign&&Object(u.b)("left:",e.borderlessIframePaddingPx+e.horizontalPaddingPx-e.borderlessIframePaddingLeftPx+e.borderlessAvatarOffsetWidthPx,"px;right:auto;")," ",({theme:e})=>e.isLauncherEnabled&&Object(u.b)("bottom:",e.verticalPaddingPx+e.launcherOffsetBottomPaddingPx-e.borderlessIframePaddingPx,"px;max-height:calc( 100% - ",e.verticalPaddingPx+e.launcherOffsetBottomPaddingPx-e.borderlessIframePaddingPx,"px );"));function mt(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_BorderlessFrame extends s.Component{constructor(...e){super(...e),mt(this,"state",{height:0,isPopoverOpen:!1}),mt(this,"handleHeightChange",e=>{this.setState({height:e})}),mt(this,"handlePopoverToggle",e=>{this.setState({isPopoverOpen:e})})}render(){const{conversation:e,part:t,onClose:o,onComposerClick:i,showReplyToButton:n,conversationSuggestions:s,onSuggestionClicked:a,setComposerSuggestionsDismissed:c}=this.props,{isPopoverOpen:p,height:h}=this.state;return r.a.createElement(dt,{style:{height:h},className:"intercom-borderless-frame",frameName:"intercom-borderless-frame",title:`Intercom live chat ${Object(l.e)("message")}`,isPopoverOpen:p},(l,p)=>r.a.createElement(pt,{conversation:e,conversationSuggestions:s,onSuggestionClicked:a,setComposerSuggestionsDismissed:c,part:t,frameWindow:l,onClose:o,onHeightChange:this.handleHeightChange,onPopoverToggle:this.handlePopoverToggle,onComposerClick:i,showReplyToButton:n,frameNode:p}))}}borderless_BorderlessFrame.propTypes={conversation:n.a.object.isRequired,conversationSuggestions:n.a.shape({prompt:n.a.any,suggestions:n.a.arrayOf(n.a.shape({uuid:n.a.string.isRequired,text:n.a.string.isRequired,preAction:n.a.string}))}),onSuggestionClicked:n.a.func,setComposerSuggestionsDismissed:n.a.func,part:n.a.object.isRequired,onClose:n.a.func.isRequired,onComposerClick:n.a.func,showReplyToButton:n.a.bool};var ut=o(501);var gt=e=>`\n  z-index: 2147483003;\n  position: fixed;\n  width: 360px;\n  right: 10px;\n  bottom: 90px;\n  height: ${e.height}px;\n  max-height: calc( 100% - 90px );\n  border: none;\n  ${e.isPopoverOpen?"min-height: 350px;":""}\n`;function bt(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_CrossOriginBorderlessFrame extends s.Component{constructor(...e){super(...e),bt(this,"state",{height:0,isPopoverOpen:!1}),bt(this,"handleHeightChange",e=>{this.setState({height:e})}),bt(this,"handlePopoverToggle",e=>{this.setState({isPopoverOpen:e})})}render(){const{conversation:e,part:t,onClose:o,onComposerClick:i,showReplyToButton:n,conversationSuggestions:s,onSuggestionClicked:a,setComposerSuggestionsDismissed:c}=this.props,{height:l,isPopoverOpen:p}=this.state,h=gt({isPopoverOpen:p,height:l});return r.a.createElement(ut.a,{name:"borderless",styles:h},r.a.createElement(pt,{conversation:e,conversationSuggestions:s,onSuggestionClicked:a,setComposerSuggestionsDismissed:c,part:t,frameWindow:window,onClose:o,onHeightChange:this.handleHeightChange,onPopoverToggle:this.handlePopoverToggle,onComposerClick:i,showReplyToButton:n,frameNode:window.document.body}))}}var ft=o(4);function vt(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return message_Message}));class message_Message extends s.Component{constructor(...e){super(...e),vt(this,"addMessageMetric",e=>{const{conversation:t,part:{id:o,messageType:i}}=this.props;Object(D.e)(e,"message","in_app","from_full",{conversation_id:t.id,message_id:o,message_type:i})}),vt(this,"handleDismissClick",()=>{this.addMessageMetric("closed"),this.props.onClose()}),vt(this,"handleComposerSuggestionClicked",e=>{const{conversation:t,onSuggestionClicked:o}=this.props;o&&o(t,e)})}componentDidMount(){const{conversation:e,userIsPresent:t,onOpen:o,onConversationRead:i}=this.props;o(),!e.read&&t&&i(),this.addMessageMetric("received")}componentDidUpdate(){const{userIsPresent:e,conversation:t}=this.props;e&&!t.read&&this.props.onConversationRead()}renderBorderless(){const{conversation:e,part:t,onComposerOrFormInputClick:o,shouldShowUpfrontEmailComposer:i,onSuggestionClicked:n,setComposerSuggestionsDismissed:s,conversationSuggestions:a}=this.props,c=Object(ft.a)()?borderless_CrossOriginBorderlessFrame:borderless_BorderlessFrame;return r.a.createElement(c,{conversation:e,conversationSuggestions:a,onSuggestionClicked:n,setComposerSuggestionsDismissed:s,part:t,onClose:this.handleDismissClick,showReplyToButton:i,onComposerClick:o})}render(){const{appWindow:e,conversation:t,part:o,appName:i,isMobile:n,onComposerOrFormInputClick:s,onReactionSelect:a,showUploadButton:c,showGifButton:l,shouldShowUpfrontEmailComposer:p,onSuggestionClicked:h,setComposerSuggestionsDismissed:d,conversationSuggestions:m}=this.props,{messageType:u,reactionsReply:g}=o;switch(u){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return n?r.a.createElement(_,{appName:i,part:o,onClose:this.handleDismissClick,composerState:t.composerState,onComposerOrFormInputClick:s}):this.renderBorderless();case"video":return r.a.createElement(ye,{conversation:t,conversationSuggestions:m,onSuggestionClicked:h,setComposerSuggestionsDismissed:d,standalone:!0,part:o,onClose:this.handleDismissClick,onComposerOrFormInputClick:s});case"note":return r.a.createElement(note_NoteFrame,{conversationId:t.id,appName:i,message:o,reactionsReply:g,showUploadButton:c,showGifButton:l,onClose:this.handleDismissClick,onComposerClick:s,onReactionSelect:a,showReplyToButton:p});case"post":return r.a.createElement(ee.a,{conversationId:t.id,appName:i,message:o,reactionsReply:g,onClose:this.handleDismissClick,onComposerClick:s,onReactionSelect:a,showReplyToButton:p});case"pointer":return r.a.createElement(pointer_PointerFrame,{appWindow:e,appName:i,message:o,conversationId:t.id,reactionsReply:g,onComposerClick:s,onReactionSelect:a,onClose:this.handleDismissClick})}}}message_Message.propTypes={appWindow:n.a.object,conversation:n.a.shape({id:n.a.string.isRequired,read:n.a.bool.isRequired,composerState:n.a.shape({visible:n.a.bool.isRequired}).isRequired}).isRequired,conversationSuggestions:n.a.shape({prompt:n.a.any,suggestions:n.a.arrayOf(n.a.shape({uuid:n.a.string.isRequired,text:n.a.string.isRequired,preAction:n.a.string}))}),onSuggestionClicked:n.a.func,setComposerSuggestionsDismissed:n.a.func,part:n.a.shape({id:n.a.string,messageType:n.a.string,reactionsReply:n.a.shape({reactionIndex:n.a.number,reactionSet:n.a.array.isRequired})}).isRequired,appName:n.a.string.isRequired,isMobile:n.a.bool.isRequired,userIsPresent:n.a.bool.isRequired,onConversationRead:n.a.func.isRequired,onOpen:n.a.func.isRequired,onClose:n.a.func.isRequired,onComposerOrFormInputClick:n.a.func.isRequired,onReactionSelect:n.a.func.isRequired,showUploadButton:n.a.bool,showGifButton:n.a.bool,shouldShowUpfrontEmailComposer:n.a.bool}},662:function(e,t,o){"use strict";var i=o(451),n=o(2),s=o(453),r=o.n(s),a=o(449),c=o.n(a),l=o(6),p=o(466),h=o(490),d=o(476),m=o(563),u=o(35),g=o(497),b=o(580),f=o(91),v=o(536),y=o(638),O=o(0);function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class snippet_Snippet extends a.Component{constructor(...e){super(...e),C(this,"addSnippetMetric",e=>{const{conversation:t}=this.props,o=Object(l.r)(t);Object(O.e)(e,"snippet","in_app","",{conversation_id:t.id,part_id:o.id,part_type:o.messageType})}),C(this,"addClickedMetric",()=>{this.addSnippetMetric("clicked")}),C(this,"handleClick",()=>{const{conversation:e,onClick:t}=this.props;this.addClickedMetric(),t(e)})}componentDidMount(){this.addSnippetMetric("received")}shouldRenderChatStyle(){const{conversation:e,stack:t}=this.props;return(Object(l.j)(e)||Object(l.i)(e))&&!t}getConversationParts(){return this.props.conversation.parts.filter(e=>!1===Object(f.a)(e.partType))}renderBody(e){if(1===e.length&&Object(g.c)(e[0]))return c.a.createElement(b.a,{text:Object(u.d)(e[0])});const{summaryText:t}=Object(u.e)(this.getConversationParts());return c.a.createElement(p.a,{text:t})}renderPlainStyle(e,t,o,i){return c.a.createElement(v.a,null,c.a.createElement(y.f,{className:"intercom-snippet",onClick:this.handleClick},c.a.createElement(h.a,{appName:o,author:e,isReplyStyle:i},c.a.createElement(y.e,null,this.renderBody(t)))))}renderChatStyle(e,t,o,i){return c.a.createElement(v.a,null,c.a.createElement(y.d,{className:"intercom-chat-snippet",onClick:this.handleClick},c.a.createElement(y.a,null,c.a.createElement(d.a,{author:e})),c.a.createElement(y.c,null,c.a.createElement(m.a,{author:e,appName:o,isReplyStyle:i}),c.a.createElement(y.b,null,this.renderBody(t)))))}render(){const{appName:e,conversation:{userParticipated:t}}=this.props,o=Object(l.d)(this.props.conversation);if(!o)return null;const{author:i,body:n}=o;return this.shouldRenderChatStyle()?this.renderChatStyle(i,n,e,t):this.renderPlainStyle(i,n,e,t)}}snippet_Snippet.defaultProps={stack:!1},snippet_Snippet.propTypes={conversation:r.a.shape({id:r.a.any.isRequired,parts:r.a.arrayOf(r.a.shape({author:r.a.object.isRequired,body:r.a.array.isRequired})).isRequired,userParticipated:r.a.bool.isRequired}).isRequired,appName:r.a.string.isRequired,stack:r.a.bool.isRequired,onClick:r.a.func.isRequired};var S=o(573);function x(e){const{conversation:t,appName:o,position:i,expanded:n,handleOnClick:s,stack:r}=e;return c.a.createElement(S.f,{position:i,expanded:n,key:t.id},c.a.createElement(snippet_Snippet,{conversation:t,appName:o,onClick:s,stack:r}))}var w=o(450),k={name:"1v8x7dw",styles:"overflow:auto;"};const j=Object(w.c)("div",{target:"e106pw6f0"})("max-height:",Object(w.e)("maxHeight"),"px;",({scroll:e})=>e&&k);var E=o(23),P=o(4);let T,_;function R(e){const{frameNode:t,children:o,keepScrollToBottom:i,scrollToBottomWithAnimation:n}=e,s=Object(P.a)()?"1000":(({offsetTop:e,clientHeight:t})=>e+t)(t),r=Object(a.useRef)(null),[l,p]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{if(Object(P.a)())return;const e=()=>{r.current&&Object(E.z)(r.current),T=window.parent.requestAnimationFrame(e)};return i&&r.current&&e(),()=>window.parent.cancelAnimationFrame(T)},[i]),Object(a.useEffect)(()=>{Object(P.a)()||n&&r.current&&Object(E.e)(r.current)},[n]),Object(a.useEffect)(()=>{if(!Object(P.a)())return _=setTimeout(()=>p(!0),300),()=>{clearTimeout(_),window.parent.cancelAnimationFrame(T)}},[]),c.a.createElement(j,{maxHeight:s,ref:r,scroll:l},o)}var I=o(9);const N=(e,t)=>e-t;let B,M,F;function H(e){const{conversations:t,appName:o,handleOnClick:i,children:n,frameNode:s}=e,r=t.filter(e=>!!Object(l.d)(e)),p=r.length*S.b,h=S.b+(r.length-1)*S.c,d=Object(I.i)(),[m,u]=Object(a.useState)(!1),[g,b]=Object(a.useState)(h),[f,v]=Object(a.useState)(!1),y=e=>{const t=r.map(e=>e.id);u(e),(e=>{Object(O.e)("hovered","message","in_app","from_grouped_message",{conversation_ids:e.join(",")})})(t),e?(clearTimeout(F),v(!0),B=setTimeout(()=>b(p),1),M=setTimeout(()=>v(!1),S.a)):F=setTimeout(()=>b(h),S.a)};return Object(a.useEffect)(()=>()=>{clearTimeout(B),clearTimeout(M),clearTimeout(F)},[]),c.a.createElement(R,{frameNode:s,keepScrollToBottom:f,scrollToBottomWithAnimation:!m},c.a.createElement(S.g,{onMouseEnter:()=>!d&&y(!0),onMouseLeave:()=>!d&&y(!1),onFocus:()=>!d&&y(!0),"aria-expanded":m},c.a.createElement(S.e,{expandAnimationInProgress:f},n),c.a.createElement(S.h,{height:g},r.map((e,t)=>c.a.createElement(x,{key:t,conversation:e,appName:o,position:N(r.length,t),expanded:m,handleOnClick:i,stack:r.length>1})))))}var D=o(32),A=o(491),q=o(500),V=o(499);class notifications_Notifications extends a.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const{onNotificationDismiss:e,conversations:t}=this.props,o=t.map(e=>e.id);this.addDismissMetrics(o),e(o);const i=Object(V.f)();i&&i.focus()},(o="handleDismiss")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidMount(){const{onDisplayNotifications:e}=this.props,t=this.getSortedConversations();this.focusTrap=new q.a({document:this.props.frameWindow.document}),e(t)}componentWillUnmount(){this.focusTrap&&this.focusTrap.restore()}addDismissMetrics(e){e.forEach(e=>{Object(O.e)("closed","message","in_app","from_snippet",{conversation_id:e})})}getSortedConversations(){return this.props.conversations.slice(-3).sort((e,t)=>e.lastPartCreatedAt>t.lastPartCreatedAt)}renderDismissButton(){const{conversations:e}=this.props,t=1===e.length?Object(D.e)("clear"):Object(D.e)("clear_all");return c.a.createElement(v.b,{onClick:this.handleDismiss,visibleDismissButton:Object(I.i)()},t,c.a.createElement(v.c,null))}renderConversationsGrouped(){const{appName:e,onNotificationClick:t,frameNode:o}=this.props,i=this.getSortedConversations();return c.a.createElement(H,{conversations:i,appName:e,handleOnClick:t,frameNode:o},i.length>0?this.renderDismissButton():null)}render(){const{frameWindow:e}=this.props;return c.a.createElement(v.d,{className:"intercom-notifications"},this.renderConversationsGrouped(),c.a.createElement(A.a,{appWindow:e}))}}notifications_Notifications.propTypes={appName:r.a.string.isRequired,frameNode:r.a.any.isRequired,frameWindow:r.a.any.isRequired,conversations:r.a.array.isRequired,onNotificationClick:r.a.func.isRequired,onNotificationDismiss:r.a.func.isRequired,onDisplayNotifications:r.a.func.isRequired};var W=o(5),z=o(8),L=o(61),U=o(42),G=o(37);t.a=Object(i.connect)(e=>{const{app:{name:t}}=e;return{appName:t,conversations:Object(G.a)(e)}},e=>({onNotificationClick:t=>{const{id:o,parts:i}=t,s=i[i.length-1],{messageType:r}=s;[void 0,"chat","link","notificationChannels","video"].indexOf(r)>-1?(e(Object(z.f)(o)),e(Object(W.l)(n.b,o))):e(Object(L.b)(o,s.id))},onNotificationDismiss:t=>{e(Object(U.b)(n.b,t))},onDisplayNotifications:t=>{t.forEach(t=>{const{id:o,parts:i}=t,n=i[i.length-1];e(Object(L.c)(o,n.id))})}}))(notifications_Notifications)},663:function(e,t,o){"use strict";var i=o(63),n=o.n(i),s=o(148),r=o.n(s),a=o(449),c=o.n(a),l=o(928),p=o.n(l),h=o(478),d=o.n(h);function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class positioner_tree_PositionerTree extends a.Component{constructor(...e){super(...e),m(this,"document",this.props.appWindow.document),m(this,"state",{container:null})}componentDidMount(){const{appWindow:e}=this.props,t=e.document.querySelector("#intercom-container");if(!e.document.body)return;const o=e.document.createElement("div");o.id="intercom-positioner-tree",o.classList.add("intercom-namespace"),o.style.cssText="position: initial; !important; z-index: 2147483647 !important;",t.insertAdjacentElement("beforeBegin",o),this.setState({container:o})}componentWillUnmount(){const e=this.state.container;if(!e)return;const t=e.parentNode;t&&t.removeChild(e)}render(){return this.state.container?d.a.createPortal(this.props.children,this.state.container):null}}var u=o(23),g=o(9),b=e=>{if(e.IntercomIntersectionObserver)return;const t=e.document;if(!g.a.isFirefox()&&"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype&&"isIntersecting"in e.IntersectionObserverEntry.prototype)return e.IntercomIntersectionObserver=e.IntersectionObserver,e.IntercomIntersectionObserverEntry=e.IntersectionObserverEntry,!0;var o=[];function i(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,o=t.width*t.height,i=this.intersectionRect,n=i.width*i.height;this.intersectionRatio=o?n/o:this.isIntersecting?1:0}function n(e,t){var o,i,n,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(o=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout((function(){o(),n=null}),i))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function s(e,t,o,i){null!=e&&("function"==typeof e.addEventListener?e.addEventListener(t,o,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,o))}function r(e,t,o,i){null!=e&&("function"==typeof e.removeEventListener?e.removeEventListener(t,o,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,o))}function a(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var o=t;o;){if(o==e)return!0;o=l(o)}return!1}function l(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},n.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,o){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==o[t-1]}))},n.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(e,"resize",this._checkForIntersections,!0),this._observationTargets.forEach(e=>{this._monitorScrollForElement(e)}),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._monitorScrollForElement=function(e){e!==t&&e&&(s(e,"scroll",this._checkForIntersections,!0),this._monitorScrollForElement(e.parent))},n.prototype._unmonitorScrollForElement=function(e){e!==t&&e&&(r(e,"scroll",this._checkForIntersections,!0),this._unmonitorScrollForElement(e.parent))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(e,"resize",this._checkForIntersections,!0),this._observationTargets.forEach(e=>{this._unmonitorScrollForElement(e)}),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),o=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var s=n.element,r=a(s),c=this._rootContainsTarget(s),l=n.entry,p=t&&c&&this._computeTargetAndRootIntersection(s,o),h=n.entry=new i({time:e.performance&&performance.now&&performance.now(),target:s,boundingClientRect:r,rootBounds:o,intersectionRect:p});l?t&&c?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(o,i){if("none"!=e.getComputedStyle(o).display){for(var n,s,r,c,p,h,d,m,u=a(o),g=l(o),b=!1;!b;){var f=null,v=1==g.nodeType?e.getComputedStyle(g):{};if("none"==v.display)return;if(g==this.root||g==t?(b=!0,f=i):g!=t.body&&g!=t.documentElement&&"visible"!=v.overflow&&(f=a(g)),f&&(n=f,s=u,r=void 0,c=void 0,p=void 0,h=void 0,d=void 0,m=void 0,r=Math.max(n.top,s.top),c=Math.min(n.bottom,s.bottom),p=Math.max(n.left,s.left),h=Math.min(n.right,s.right),m=c-r,!(u=(d=h-p)>=0&&m>=0&&{top:r,bottom:c,left:p,right:h,width:d,height:m})))break;g=l(g)}return u}},n.prototype._getRootRect=function(){var e;if(this.root)e=a(this.root);else{var o=t.documentElement,i=t.body;e={top:0,left:0,right:o.clientWidth||i.clientWidth,width:o.clientWidth||i.clientWidth,bottom:o.clientHeight||i.clientHeight,height:o.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},n.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,o){return"px"==t.unit?t.value:t.value*(o%2?e.width:e.height)/100})),o={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return o.width=o.right-o.left,o.height=o.bottom-o.top,o},n.prototype._hasCrossedThreshold=function(e,t){var o=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(o!==i)for(var n=0;n<this.thresholds.length;n++){var s=this.thresholds[n];if(s==o||s==i||s<o!=s<i)return!0}},n.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},n.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},n.prototype._registerInstance=function(){o.indexOf(this)<0&&o.push(this)},n.prototype._unregisterInstance=function(){var e=o.indexOf(this);-1!=e&&o.splice(e,1)},e.IntercomIntersectionObserver=n,e.IntercomIntersectionObserverEntry=e.IntersectionObserverEntry};var f=e=>{var t=e,o=e.document,i=t.HTMLElement||t.Element,n={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy||t.intercomScrollBy,elementScroll:c,intercomScrollIntoView:i.prototype.intercomScrollIntoView},s=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now;var r,a=(r=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);function c(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function p(e,t){return"Y"===t?e.clientHeight+a<e.scrollHeight:"X"===t?e.clientWidth+a<e.scrollWidth:void 0}function h(e,o){var i=t.getComputedStyle(e,null)["overflow"+o];return"auto"===i||"scroll"===i}function d(e){var t=p(e,"Y")&&h(e,"Y"),o=p(e,"X")&&h(e,"X");return t||o}function m(e){var t;do{t=(e=e.parentNode)===o.body}while(!1===t&&!1===d(e));return t=null,e}function u(e){var o,i,n,r,a=(s()-e.startTime)/800;r=a=a>1?1:a,o=.5*(1-Math.cos(Math.PI*r)),i=e.startX+(e.x-e.startX)*o,n=e.startY+(e.y-e.startY)*o,e.method.call(e.scrollable,i,n),i===e.x&&n===e.y||t.requestAnimationFrame(u.bind(t,e))}function g(e,i,r){var a,l,p,h,d=s();e===o.body?(a=t,l=t.scrollX||t.pageXOffset,p=t.scrollY||t.pageYOffset,h=n.scroll):(a=e,l=e.scrollLeft,p=e.scrollTop,h=c),u({scrollable:a,method:h,startTime:d,startX:l,startY:p,x:i,y:r})}t.intercomScrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?n.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):g.call(t,o.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},i.prototype.intercomScrollIntoView=function(){if(!0!==l(arguments[0])){var e=m(this),i=e.getBoundingClientRect(),s=this.getBoundingClientRect();e!==o.body?(g.call(this,e,e.scrollLeft+s.left-i.left,e.scrollTop+s.top-i.top),"fixed"!==t.getComputedStyle(e).position&&t.intercomScrollBy({left:i.left,top:i.top,behavior:"smooth"})):t.intercomScrollBy({left:s.left,top:s.top,behavior:"smooth"})}else n.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}};var v=o(929);const y=(e,t)=>{const o=t.element;if(!o)return e;const i=e.placement.split("-")[0],{popper:n,reference:s}=e.offsets,r=-1!==["left","right"].indexOf(i),a=r?"height":"width",c=r?"Top":"Left",l=c.toLowerCase(),p=r?"left":"top",h=r?"bottom":"right",d=Object(v.getOuterSizes)(o)[a];s[h]-d<n[l]&&(e.offsets.popper[l]-=n[l]-(s[h]-d)),s[l]+d>n[h]&&(e.offsets.popper[l]+=s[l]+d-n[h]),e.offsets.popper=Object(v.getClientRect)(e.offsets.popper);const m=s[l]+s[a]/2-d/2,u=Object(v.getStyleComputedProperty)(e.instance.popper),g=parseFloat(u[`margin${c}`]),b=parseFloat(u[`border${c}Width`]);let f=m-e.offsets.popper[l]-g-b;return f=Math.max(Math.min(n[a]-d-32,f),0),e.arrowElement=o,e.offsets.arrow={[l]:Math.round(f),[p]:""},e};var O=o(643);function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class event_blocker_EventBlocker extends a.Component{constructor(...e){super(...e),C(this,"eventBlockerRef",void 0),C(this,"stopBubbling",e=>{"click"===e.type&&this.props.onClickEvent&&this.props.onClickEvent(),e.stopPropagation()})}componentDidMount(){this.eventBlockerRef&&this.props.events.forEach(e=>{Object(u.c)(this.eventBlockerRef,e,this.stopBubbling)})}componentWillUnmount(){this.eventBlockerRef&&this.props.events.forEach(e=>{Object(u.y)(this.eventBlockerRef,e,this.stopBubbling)})}render(){return c.a.createElement("div",{className:"event-blocker",ref:e=>this.eventBlockerRef=e},this.props.children)}}function S(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?S(o,!0).forEach((function(t){w(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):S(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function w(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return positioner_Positioner}));class positioner_Positioner extends a.Component{constructor(...e){super(...e),w(this,"arrow",void 0),w(this,"node",void 0),w(this,"arrowContainer",void 0),w(this,"positioner",void 0),w(this,"targetInDom",void 0),w(this,"IntersectionObserver",void 0),w(this,"missingSelectorTimeout",void 0),w(this,"scrollIntoViewTimeout",void 0),w(this,"repositionCheckTimeout",void 0),w(this,"mutationObserver",void 0),w(this,"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,nodeIsEntirelyInViewport:!1,positionerOffsetForMask:{left:0,top:0},placement:null,maskStyles:{padding:0,top:0,left:0,width:0,height:0}}),w(this,"targetWithClickHandler",null),w(this,"updateElementPosition",e=>{const{styles:t,arrowStyles:o}=e;return this.setState({styles:t,hide:!this.targetIsVisible(),arrowStyles:o}),e.attributes&&this.applyAttributes(e.attributes),this.checkIfRepositionRequired(e),e}),w(this,"updateMaskPosition",()=>{const e=this.getMaskStyles();r()(this.state.maskStyles,e)||this.setState({maskStyles:e})}),w(this,"handleOverlayClick",()=>{this.scrollIntoView(),this.props.onOverlayClick&&this.props.onOverlayClick()}),w(this,"handleTargetClick",()=>{this.props.onTargetClick&&this.props.onTargetClick()}),w(this,"handlePlacementChange",()=>{this.props.onPlacementChange&&this.state.placement&&this.props.onPlacementChange(this.state.placement)}),w(this,"renderOverlay",()=>{const e=this.getTargetNode();return this.props.renderOverlay(this.handleOverlayClick,this.props,e)})}reinitializeObjects(){this.initializeIntersectionObserver(),this.initializePositioner(),this.setupTargetClickHandler()}componentDidMount(){this.initializeMuationObserver(),this.reinitializeObjects(),this.updateMaskPosition()}shouldComponentUpdate(e,t){return!r()(this.props,e)||!r()(this.state,t)}componentDidUpdate(e,t){e.targetSelector!==this.props.targetSelector?this.reinitializeObjects():this.positioner?this.positioner.scheduleUpdate():this.reinitializeObjects(),t.placement!==this.state.placement&&this.handlePlacementChange()}componentWillUnmount(){const{appWindow:e}=this.props;this.destroyIntersectionObserver(),this.destroyPositioner(),this.destroyTargetClickHandler(),(e=>{e.IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry)})(e),(e=>{var t=e;(t.HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy})(e),this.missingSelectorTimeout&&clearTimeout(this.missingSelectorTimeout),this.scrollIntoViewTimeout&&clearTimeout(this.scrollIntoViewTimeout),this.repositionCheckTimeout&&clearTimeout(this.repositionCheckTimeout),this.mutationObserver&&this.mutationObserver.disconnect()}getTargetNode(){const{targetSelector:e,appWindow:t}=this.props;try{return t.document.querySelector(e)}catch(e){return null}}setupTargetClickHandler(){this.destroyTargetClickHandler(),this.targetWithClickHandler=this.getTargetNode(),this.targetWithClickHandler&&Object(u.c)(this.targetWithClickHandler,"click",this.handleTargetClick,!0)}destroyTargetClickHandler(){this.targetWithClickHandler&&Object(u.y)(this.targetWithClickHandler,"click",this.handleTargetClick)}storeMaskOffsetsBasedOnFlipPosition(e){const{scrollable:t}=this.props;if(!t)return;const o=e["x-placement"];switch(o){case"bottom":this.setState({placement:o,positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({placement:o,positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({placement:o,positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({placement:o,positionerOffsetForMask:{left:3,top:0}});break;default:return}}applyAttributes(e){[this.arrowContainer,this.node].forEach(t=>{t&&"function"==typeof t.querySelectorAll&&Object.keys(e).forEach(o=>{t&&t.setAttribute&&t.setAttribute(o,e[o])}),this.storeMaskOffsetsBasedOnFlipPosition(e)})}checkIfRepositionRequired(e){const{styles:t,attributes:o}=e;if(this.repositionCheckTimeout&&clearTimeout(this.repositionCheckTimeout),o&&!1!==o["x-out-of-boundaries"]&&t&&t.transform){const e=(t.transform.match(/(-{0,1}\d+)px/g)||[]).map(e=>Number(e.replace("px",""))),o=parseInt(e[0]),i=parseInt(e[1]);o<0&&i<0&&(this.repositionCheckTimeout=setTimeout(()=>{this.nodeIsVisible()&&this.reinitializeObjects()},500))}}targetIsVisible(){const{nodeInViewPort:e}=this.state;if(!e)return!1;const t=this.getTargetNode();return Object(u.u)(t)}scrollIntoView(){const{appWindow:e}=this.props;f(e),this.scrollIntoViewTimeout=setTimeout(()=>{const{nodeIsEntirelyInViewport:e}=this.state,t=this.getTargetNode();t&&!e&&(t.intercomScrollIntoView?t.intercomScrollIntoView({behavior:"smooth",block:"center",inline:"center"}):t.scrollIntoView&&t.scrollIntoView(!0,{behaviour:"smooth"}))},200)}initializeMuationObserver(){const{appWindow:e}=this.props;this.targetInDom=!!this.getTargetNode(),this.mutationObserver=new MutationObserver(()=>{this.targetInDom&&!this.getTargetNode()&&(this.targetInDom=!1,this.destroyPositioner(),this.forceUpdate()),!this.targetInDom&&this.getTargetNode()&&(this.targetInDom=!0,this.forceUpdate()),this.updateMaskPosition()}),this.mutationObserver.observe(e.document.body,{attributes:!0,subtree:!0,childList:!0})}initializePositioner(){const{scrollable:e}=this.props,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new p.a(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow,fn:y},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))}initializeIntersectionObserver(){const{appWindow:e}=this.props,t=this.getTargetNode();t&&(e.IntercomIntersectionObserver||b(e),this.IntersectionObserver=new e.IntercomIntersectionObserver(e=>{if(0===e.length)return;const{isIntersecting:o,intersectionRatio:i}=n()(e,["time"],["desc"])[0],s=o,r=o&&Object(u.u)(t),a=1===i;this.setState({hide:!r,nodeInViewPort:s,nodeIsEntirelyInViewport:a})},{threshold:.05}),this.IntersectionObserver.observe(t))}destroyPositioner(){this.positioner&&(this.positioner.destroy(),delete this.positioner)}destroyIntersectionObserver(){this.IntersectionObserver&&this.IntersectionObserver.disconnect()}reinitializePointer(){this.destroyPositioner(),this.initializePositioner()}reinitializeIntersectionObserver(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()}mergedStyles(){const{scrollable:e}=this.props,{styles:t,positionerOffsetForMask:o}=this.state;if(!t)return{};if(!e)return t;const{left:i,top:n}=o;return x({},t,{left:t.left+i,top:t.top+n})}nodeIsVisible(){const e=this.getTargetNode();return e&&Object(u.u)(e)}getStyles(){const{hideArrow:e}=this.props,{height:t,width:o,opacity:i}=this.props.childDimensions||{},n=e?5:15;if(this.nodeIsVisible()){const e=!this.state.hide&&t&&o&&i?1:0;return this.onSelectorMatch(),x({},this.mergedStyles(),{opacity:e,margin:n})}if(this.props.renderFallback){const{opacity:e}=this.props.childDimensions||{};return this.props.targetSelector&&this.onMissingSelector(),{position:"fixed",top:`calc(50% - ${(t||0)/2}px)`,left:`calc(50% - ${(o||0)/2}px)`,opacity:e,margin:n}}}getArrowStyles(){const{arrowStyles:e,hide:t}=this.state,{height:o,width:i}=this.props.childDimensions||{},n=!t&&o&&i?1:0;return e?{top:e.top,left:e.left,opacity:n}:{opacity:n}}getMaskStyles(){const e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{padding:0,top:0,left:0,width:0,height:0};const{top:t,left:o,width:i,height:n}=e.getBoundingClientRect(),{appWindow:s}=this.props;return{padding:3,top:t-3+s.pageYOffset,left:o-3+s.pageXOffset,width:i,height:n}}renderArrow(){return c.a.createElement(O.b,{style:x({},this.getArrowStyles()),ref:e=>this.arrow=e},c.a.createElement(O.a,{frameName:"intercom-positioner-arrow-frame"},()=>c.a.createElement(O.e,{style:{display:this.props.hideArrow?"none":"block"},ref:e=>this.arrowContainer=e})))}onMissingSelector(){this.missingSelectorTimeout||(this.missingSelectorTimeout=setTimeout(()=>{!this.nodeIsVisible()&&this.props.onMissingSelector&&this.props.onMissingSelector()},300))}onSelectorMatch(){this.props.onSelectorMatch&&this.props.onSelectorMatch()}render(){const{scrollable:e,shouldAnimate:t,renderFallback:o,children:i,appWindow:n}=this.props,s=this.getTargetNode();if(!s&&!o)return null;const{maskStyles:r}=this.state,{width:a,height:l}=r;return c.a.createElement(positioner_tree_PositionerTree,{appWindow:n},c.a.createElement(c.a.Fragment,null,c.a.createElement(O.g,{ref:e=>this.node=e,style:this.getStyles()},c.a.createElement(O.d,null,this.nodeIsVisible()?this.renderArrow():null,this.targetIsVisible()||o?i:null)),c.a.createElement(O.f,{style:r,isStep:e&&!!s,isPost:e&&!s,isAnimating:t,height:l,width:a}),c.a.createElement(event_blocker_EventBlocker,{events:["auxclick","click","dblclick","mousedown","mouseup"],onClickEvent:()=>this.handleOverlayClick()},this.renderOverlay())))}}w(positioner_Positioner,"defaultProps",{hideArrow:!1,renderFallback:!1,shouldAnimate:!1,renderOverlay:(e,{scrollable:t})=>c.a.createElement(O.c,{onClick:e,scrollable:t,tabIndex:"-1"})})},942:function(e,t,o){"use strict";o.r(t);var i=o(451),n=o(19),s=o(31),r=o(449),a=o.n(r),c=o(471),l=o.n(c),p=o(465),h=o(489),d=o(32),m=o(490),u=o(540),g=o(7),b=o(450),f={name:"isshev",styles:"padding:25px 0px;"};const v=Object(b.c)("div",{target:"e1mknya50"})("position:relative;padding:8px;order:0;flex:0 1 100%;align-self:auto;display:flex;justify-content:flex-end;align-items:center;border-top:1px solid #eee;",({hideButton:e})=>e&&f," ",({isVideoStep:e})=>e&&Object(b.b)("transition:transform 300ms cubic-bezier(0.165,0.84,0.44,1),opacity 10ms;transform:translateY(100%);margin-top:4px;border-radius:5px;position:absolute;bottom:0;left:0;right:0;border:0;opacity:0;",w.className,"{color:#fff;font-size:14px;}")),y=Object(b.c)("div",{target:"e1mknya51"})("flex:0 1 auto;position:relative;button{font-size:14px;background-color:",Object(b.f)("appColor"),";color:white;font-weight:bold;padding:10px 20px;border-radius:4px;cursor:pointer;}button[disabled]{opacity:0.6;}",({animating:e})=>e&&Object(b.b)("animation:",O()," 500ms;")),O=()=>Object(b.d)("0%{",S,";}25%{",C,";}49%{",S,";}50%{",S,";}75%{",x,";}100%{",S,";}"),C={name:"1ldqog6",styles:"transform:scale(1.1);"},S={name:"41q668",styles:"transform:scale(1);"},x={name:"kp0j2p",styles:"transform:scale(1.05);"},w=Object(b.c)("div",{target:"e1mknya52"})("position:absolute;left:0;right:0;text-align:center;color:",Object(b.f)("installGrey1"),";font-size:14px;");function k(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class tour_step_footer_TourStepFooter extends r.Component{constructor(...e){super(...e),k(this,"button",void 0),k(this,"disabledButton",void 0),k(this,"inputFieldValidation",void 0),k(this,"state",{buttonIsAnimating:!1,disabledButton:!1}),k(this,"finishButtonAnimation",()=>{this.button&&this.setState({buttonIsAnimating:!1})}),k(this,"validateInput",()=>{this.setState({disabledButton:!0}),this.inputFieldValidation=new g.c(this.props.selector,e=>{this.setState({disabledButton:!e})}),this.inputFieldValidation.run()}),k(this,"handleOnContinue",()=>{this.state.disabledButton||this.props.onContinue()})}componentDidMount(){this.button&&this.button.addEventListener("animationend",this.finishButtonAnimation),"type"===this.props.progressionBehavior&&this.validateInput()}componentDidUpdate(){const{resetOverlayClick:e}=this.props;this.props.hasClickedOverlay&&(this.setState({buttonIsAnimating:!0}),e())}componentWillUnmount(){this.inputFieldValidation&&this.inputFieldValidation.destroy()}render(){const e="click"!==this.props.progressionBehavior;return a.a.createElement(v,{hideButton:!e,isVideoStep:this.props.isVideoStep},a.a.createElement(w,null,Object(d.e)("product_tours_tour_step_number",{start_number:this.props.activeStepIndex+1,end_number:this.props.stepCount})),e&&a.a.createElement(y,{animating:this.state.buttonIsAnimating,ref:e=>this.button=e},a.a.createElement("button",{disabled:this.state.disabledButton,onClick:this.handleOnContinue,tabIndex:"0"},this.props.activeStepIndex+1===this.props.stepCount?Object(d.e)("product_tours_done"):Object(d.e)("product_tours_next"))))}}var j=o(497),E=o(634),P=o(475);var T=o.p+"images/video-mask.835382d2.svg";var _=o.p+"images/video-mask-right.f31df601.svg",R=o(578),I=o(533),N=o(565);const B=Object(b.c)("div",{target:"e1ggaaxy0"})("opacity:0;position:absolute;left:0;top:0;cursor:pointer;right:0;bottom:0;background:rgba(0,0,0,0.4);transition:opacity 300ms cubic-bezier(0.165,0.84,0.44,1);",R.b.className,"{right:50%;bottom:50%;margin-right:-22px;margin-bottom:-22px;background-size:44px 44px;}",P.a.className," svg > g > g{fill:",Object(b.f)("white"),";}"),M=Object(b.c)("div",{target:"e1ggaaxy1"})("mask-image:url(",T,");"),F=Object(b.c)("div",{target:"e1ggaaxy2"})(),H=Object(b.c)("div",{target:"e1ggaaxy3"})("position:relative;",P.a.className,"{right:8px;top:18px;}",N.a.className,"{padding:20px;padding-bottom:16px;font-weight:400;}.timeline-intercom-video-step-mask{mask-image:url('../images/video-tours-mask.svg');}",R.d.className,"{position:relative;}&:hover{",I.b.className,"{transform:translateY(28px);opacity:0;}",B.className,"{opacity:1;&.intercom-tour-step-video-overlay-hidden{opacity:0;}",v.className,"{transform:translateY(0);opacity:1;}}}",({videoComplete:e})=>e&&Object(b.b)(I.b.className,"{transform:translateY(28px);opacity:0;}",B.className,"{opacity:1;&.intercom-tour-step-video-overlay-hidden{opacity:0;}",v.className,"{transform:translateY(0);opacity:1;}}")," ",({placement:e})=>"right"===e&&Object(b.b)(M.className,"{mask-image:url(",_,");transform:rotate(180deg);}",F.className,"{transform:rotate(180deg);}",v.className,"{left:10px;}",P.a.className,"{right:8px;top:8px;}",I.b.className,"{left:10px;margin-right:10px;}")," ",({placement:e})=>"left"===e&&Object(b.b)(M.className,"{mask-image:url(",_,");}",v.className,"{right:10px;}",P.a.className,"{right:18px;top:8px;}",I.b.className,"{left:-10px;margin-left:10px;}")," ",({placement:e})=>"top"===e&&Object(b.b)(F.className,"{transform:rotate(180deg);}",v.className,"{bottom:10px;}",M.className,"{transform:rotate(180deg);}",P.a.className,"{right:8px;top:8px;}",I.b.className,"{bottom:0px;padding-bottom:10px;}"));function D({muted:e,onClick:t}){return a.a.createElement(R.b,{muted:e,onClick:t})}var A=o(1);const q=Object(A.createSelector)(n.o,n.n,(e,t)=>({muted:e,userHasInteractedWithVideo:t}));var V=Object(i.connect)(q,{changeVideoMuted:s.a})((function({block:{url:e,captions:t,thumbnailUrl:o},placement:i,activeStepIndex:n,stepCount:s,onClose:c,onContinue:p,muted:h,changeVideoMuted:m,userHasInteractedWithVideo:g,hasClickedOverlay:b,resetOverlayClick:f,selector:v,progressionBehavior:y}){const[O,C]=Object(r.useState)(!0),[S,x]=Object(r.useState)(),[w,k]=Object(r.useState)(!1),j=()=>{h&&x(0),m(!h)},T=l()("intercom-tour-step-video-overlay",{"intercom-tour-step-video-overlay-hidden":w});return a.a.createElement(H,{placement:i,videoComplete:!O},a.a.createElement(M,null,a.a.createElement(F,null,a.a.createElement(E.a,{srcUrl:e,captions:h?t:void 0,showControls:!1,onComplete:()=>{C(!1)},onReplay:()=>C(!0),muted:h,startTime:S,loop:!g&&h,thumbnailUrl:o}),a.a.createElement(B,{className:T,onClick:e=>{e.target.classList.contains("intercom-tour-step-video-overlay")&&j(),k(!0)},onMouseMove:()=>k(!1)},a.a.createElement(P.a,{onClick:c,"aria-label":Object(d.e)("close")},a.a.createElement(u.a,null)),O&&a.a.createElement(D,{muted:h,onClick:j}),s>1?a.a.createElement(tour_step_footer_TourStepFooter,{activeStepIndex:n,stepCount:s,onContinue:p,selector:v,hasClickedOverlay:b,resetOverlayClick:f,progressionBehavior:y,isVideoStep:!0}):null))))}));function W(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class tour_step_TourStep extends r.Component{constructor(...e){super(...e),W(this,"state",{isScrolled:!1}),W(this,"handleScroll",e=>{this.setState({isScrolled:e.target.scrollTop>0})}),W(this,"handleOnCloseClick",()=>{this.props.onStop()})}getClassNames(){return l()({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.isPointer(),"intercom-tour-step-post":!this.isPointer()})}calculateWidth(){const{appWindow:e}=this.props,t=e.innerWidth;return Math.min(624,t)-80}isPointer(){return!!this.props.selector}getStyles(){if(!this.isPointer())return{width:`${this.calculateWidth()}px`}}onLoad(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){this.props.step.id!==e.step.id&&this.onLoad()}componentDidMount(){this.props.onLoad()}renderVideoTourStep(){const{onContinue:e,activeStepIndex:t,stepCount:o,placement:i,selector:n,step:{blocks:s,progressionBehavior:r},hasClickedOverlay:c,resetOverlayClick:l}=this.props;return i?a.a.createElement(V,{block:s[0],placement:i,activeStepIndex:t,stepCount:o,selector:n,onClose:this.handleOnCloseClick,onContinue:e,hasClickedOverlay:c,resetOverlayClick:l,progressionBehavior:r}):null}renderTourStep(){const{onContinue:e,activeStepIndex:t,stepCount:o,author:i,appName:n,selector:s,step:{blocks:r,progressionBehavior:c,id:l},hasClickedOverlay:g,resetOverlayClick:b}=this.props;return a.a.createElement(m.a,{appName:n,isReplyStyle:!1,author:i},a.a.createElement("div",{className:"intercom-tour-step-header"},a.a.createElement(P.a,{onClick:this.handleOnCloseClick,"aria-label":Object(d.e)("close")},a.a.createElement(u.a,null))),a.a.createElement(P.b,{className:"intercom-tour-step-content"},a.a.createElement(h.a,{onScroll:this.handleScroll},a.a.createElement(p.a,{blocks:r,key:`tour-step-block-${l}`}))),o>1?a.a.createElement(tour_step_footer_TourStepFooter,{activeStepIndex:t,stepCount:o,onContinue:e,selector:s,progressionBehavior:c,hasClickedOverlay:g,resetOverlayClick:b,isVideoStep:!1}):null)}render(){const{blocks:e}=this.props.step,t=this.state.isScrolled,o=this.isPointer();return a.a.createElement(P.c,{className:this.getClassNames(),style:this.getStyles(),isPointer:o,isPost:!o,scrolled:t},Object(j.b)(e)?this.renderVideoTourStep():this.renderTourStep())}}var z=o(456),L=o(663),U=o(452);const G=Object(b.c)("div",{target:"ekepq2u0"})("position:absolute;z-index:",Object(U.m)(),";");function Y({onClick:e,appWindow:t,targetNode:o}){const{left:i,right:n,top:s,bottom:r}=function(e,t){let{left:o,right:i,top:n,bottom:s}=e.getBoundingClientRect();const{pageXOffset:r,pageYOffset:a}=t;return o+=r,i+=r,n+=a,s+=a,{left:o,right:i,top:n,bottom:s}}(o,t),c=function(e){const{body:t,documentElement:o}=e;return t&&o?Math.max(t.offsetHeight,o.clientHeight,o.offsetHeight):0}(t.document);return a.a.createElement(a.a.Fragment,null,a.a.createElement(G,{style:{top:0,left:0,right:0,height:s},tabIndex:"none",onClick:e}),a.a.createElement(G,{style:{top:s,left:0,width:i,height:r-s},tabIndex:"none",onClick:e}),a.a.createElement(G,{style:{top:s,left:n,right:0,height:r-s},tabIndex:"none",onClick:e}),a.a.createElement(G,{style:{top:r,left:0,right:0,bottom:0,height:c-r},tabIndex:"none",onClick:e}))}var $=o(458),X={name:"1j1kj5x",styles:"border:none;box-shadow:none;"};const K=Object(b.c)($.a,{target:"e1s9bqu40"})("z-index:",Object(U.m)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);",({isVideo:e})=>e&&X);var J=o(0);function Q(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function Z(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Q(o,!0).forEach((function(t){ee(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Q(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ee(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class tour_TourFrame extends r.PureComponent{constructor(...e){super(...e),ee(this,"state",{width:0,height:0,opacity:0,placement:null,hasClickedOverlay:!1,recordFailureStats:!1}),ee(this,"handleDimensionFrameSize",({height:e,width:t})=>{this.setState({width:t,height:e,opacity:1})}),ee(this,"trackingKey",e=>{const{isPreviewingTour:t}=this.props;return t?e+"_preview":e}),ee(this,"handleOnTourContinue",()=>{const{onContinue:e,activeStepIndex:t,stepCount:o}=this.props;this.setState({opacity:0,recordFailureStats:!1}),e();const i=t+1===o?"done":"next";Object(J.e)("clicked",i,this.trackingKey("tour"),null,this.trackingMetadata())}),ee(this,"handleOnTourStop",()=>{const{onStop:e}=this.props;Object(J.e)("clicked","stop",this.trackingKey("tour"),null,this.trackingMetadata()),this.setState({opacity:0,recordFailureStats:!1}),e()}),ee(this,"handleMissingCssSelector",()=>{const{activeStep:e,onFailure:t,isPreviewingTour:o}=this.props;e.selector&&(Object(J.e)("css_selector_match_failed",this.trackingKey("tour_step"),"positioner",null,Z({},this.trackingMetadata(),{},this.activeStepSelectorMetadata())),!o&&this.state.recordFailureStats&&t())}),ee(this,"handleTourStepLoad",()=>{const{stepCount:e,activeStepIndex:t,onComplete:o}=this.props;t+1===e&&o(),this.setState({recordFailureStats:!0}),Object(J.e)("viewed",this.trackingKey("tour_step"),"tour",null,this.trackingMetadata())}),ee(this,"handleOverlayClick",()=>{Object(J.e)("clicked",this.trackingKey("outside_tour_step"),"tour",null,this.trackingMetadata()),this.setState({hasClickedOverlay:!0})}),ee(this,"resetOverlayClick",()=>{this.setState({hasClickedOverlay:!1})}),ee(this,"handleTargetClick",()=>{this.isClickToProgress()&&this.handleOnTourContinue()}),ee(this,"handlePlacementChange",e=>{this.setState({placement:e})}),ee(this,"isClickToProgress",()=>"click"===this.props.activeStep.progressionBehavior),ee(this,"needsInteractionWithElement",()=>{const{progressionBehavior:e}=this.props.activeStep;return"click"===e||"type"===e}),ee(this,"getOverlayRenderer",()=>{if(this.needsInteractionWithElement())return this.clickToProgressOverlayRenderer}),ee(this,"clickToProgressOverlayRenderer",(e,{appWindow:t},o)=>o?a.a.createElement(Y,{onClick:e,targetNode:o,appWindow:t}):null)}getChildDimensions(){const{width:e,height:t,opacity:o}=this.state;return{width:e,height:t,opacity:o}}getFrameDimensions(){const{width:e,height:t}=this.state;return{width:e,height:t}}trackingMetadata(){const{activeTourId:e,activeStep:t,activeStepIndex:o,stepCount:i}=this.props;return{tour_id:e,tour_step_id:t.id,active_step_index:o,step_count:i}}activeStepSelectorMetadata(){const{activeStep:e}=this.props;let t=!1;if(e.selectors.auto_secondary)try{t=null!=window.parent.document.querySelector(e.selectors.auto_secondary)}catch(e){}return Z({},e.selectors,{secondary_currently_matches:t})}render(){const{appWindow:e,appName:t,author:o,activeStep:i,stepCount:n,activeStepIndex:s,isAwaitingProgress:r}=this.props,{placement:c}=this.state,l=Object(j.b)(i.blocks);return a.a.createElement(L.a,{appWindow:e,scrollable:!0,targetSelector:i.selector,childDimensions:this.getChildDimensions(),renderFallback:!r,key:`tour-step-${i.id}`,onMissingSelector:this.handleMissingCssSelector,onOverlayClick:this.handleOverlayClick,onTargetClick:this.handleTargetClick,onPlacementChange:this.handlePlacementChange,hideArrow:l||!i.selector,renderOverlay:this.getOverlayRenderer(),shouldAnimate:this.isClickToProgress()},a.a.createElement(K,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:"intercom-tour-frame",title:`Intercom live chat ${Object(d.e)("tour")}`,isVideo:l},()=>a.a.createElement(z.a,{id:"tour-frame",key:"tour-frame",onChange:this.handleDimensionFrameSize},a.a.createElement(tour_step_TourStep,{appWindow:e,appName:t,author:o,step:i,activeStepIndex:s,stepCount:n,selector:i.selector,onLoad:this.handleTourStepLoad,onContinue:this.handleOnTourContinue,onStop:this.handleOnTourStop,placement:c,hasClickedOverlay:this.state.hasClickedOverlay,resetOverlayClick:this.resetOverlayClick}))))}}o.d(t,"mapStateToProps",(function(){return te})),o.d(t,"mapDispatchToProps",(function(){return oe}));const te=e=>{const t=Object(n.c)(e),o=Object(n.f)(e),i=Object(n.e)(e),s=Object(n.d)(e),r=Object(n.a)(e),a=Object(n.i)(e),c=Object(n.b)(e),l=Object(n.h)(e),p=e.app.name;return{activeTourId:t.id,activeStep:o,activeStepIndex:i,stepCount:s,appName:p,author:r,isPreviewingTour:a,endTourAnimation:c,isAwaitingProgress:l}},oe=e=>({onContinue:()=>{e(Object(s.e)())},onStop:()=>{e(Object(s.i)())},onComplete:()=>{e(Object(s.c)())},onFailure:()=>{e(Object(s.f)())}});t.default=Object(i.connect)(te,oe)(tour_TourFrame)},949:function(e,t,o){"use strict";o.r(t);var i=o(451),n=o(453),s=o.n(n),r=o(449),a=o.n(r),c=o(461),l=o(651);class message_container_MessageContainer extends r.Component{componentDidMount(){const{isFetching:e,isFetched:t,onFetch:o}=this.props;e||t||o()}render(){const{props:e}=this;return a.a.createElement(c.TransitionGroup,null,e.isFetched?a.a.createElement(c.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},a.a.createElement(l.a,e)):null)}}message_container_MessageContainer.propTypes={isFetching:s.a.bool.isRequired,isFetched:s.a.bool.isRequired,onFetch:s.a.func.isRequired};var p=o(2),h=o(5),d=o(59),m=o(6);o.d(t,"mapStateToProps",(function(){return u})),o.d(t,"mapDispatchToProps",(function(){return g})),o.d(t,"mergeProps",(function(){return b}));const u=e=>{const t=Object(d.a)(e)[0],{isFetching:o}=t;return{isFetching:o,isFetched:!Object(m.m)(t),conversation:t}},g=e=>({onFetch:t=>{e(Object(h.l)(p.b,t))}}),b=(e,t,o)=>Object.assign({},e,t,o,{onFetch:()=>{t.onFetch(e.conversation.id)}});t.default=Object(i.connect)(u,g,b)(message_container_MessageContainer)},950:function(e,t,o){"use strict";o.r(t);var i=o(449),n=o.n(i),s=o(456),r=o(662),a=o(450),c=o(458),l=o(452),p=o(573);const h=Object(a.c)(c.a,{target:"e1gfsz3r0"})("position:fixed;z-index:",Object(l.m)(),";",({theme:e})=>Object(a.b)("bottom:",Object(l.k)({theme:e})-p.d,"px;right:",e.horizontalPaddingPx-p.i,"px;")," ",({width:e,height:t})=>Object(a.b)("width:",e+10,"px;height:",t+5,"px;")," ",({theme:e})=>e.isLeftAlign&&Object(a.b)("left:",e.horizontalPaddingPx-p.i,"px;right:auto;"));var d=o(32);function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"default",(function(){return notifications_NotificationsFrame}));class notifications_NotificationsFrame extends i.Component{constructor(...e){super(...e),m(this,"state",{width:0,height:0}),m(this,"handleMeasurementChange",({width:e,height:t})=>{this.setState({width:e,height:t})})}render(){return n.a.createElement(h,{frameName:"intercom-notifications-frame",title:`Intercom live chat ${Object(d.e)("message")}`,width:this.state.width,height:this.state.height},(e,t)=>n.a.createElement(s.a,{onChange:this.handleMeasurementChange},n.a.createElement(r.a,{frameWindow:e,frameNode:t})))}}},951:function(e,t,o){"use strict";o.r(t);var i=o(449),n=o.n(i),s=o(456),r=o(662),a=o(501);var c=({width:e,height:t})=>`\n  position: fixed;\n  z-index: 2147483003;\n  bottom: 90px;\n  width: ${e+10}px;\n  height: ${t+5}px;\n  right: 15px;\n  border: none;\n`;function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"default",(function(){return notifications_NotificationsFrame}));class notifications_NotificationsFrame extends i.Component{constructor(...e){super(...e),l(this,"state",{width:0,height:0}),l(this,"handleMeasurementChange",({width:e,height:t})=>{this.setState({width:e,height:t})})}render(){const{width:e,height:t}=this.state,o=c({height:t,width:e});return n.a.createElement(a.a,{name:"notifications",styles:o},n.a.createElement(s.a,{onChange:this.handleMeasurementChange},n.a.createElement(r.a,{frameWindow:window,frameNode:window.document.body})))}}},952:function(e,t,o){"use strict";o.r(t);var i=o(451),n=o(658),s=o(651),r=o(10),a=o(9),c=o(2),l=o(8);var p=o(5),h=o(214),d=o(161);o.d(t,"mapStateToProps",(function(){return m}));const m=e=>{const{isPresent:t}=e.user,{name:o,userConversationAttachmentsEnabled:i,userConversationGifsEnabled:n}=e.app,s=Object(d.a)(e),c=s[0],l=a.a.isMobileBrowser(),p=s[0].parts[0],h=Object(r.l)(e),{upfrontEmailCollectorShowing:m}=e.app.upfrontEmailCollection;return{appName:o,conversation:c,part:p,userIsPresent:t,isMobile:l,showUploadButton:i,showGifButton:n,shouldShowUpfrontEmailComposer:h,isUpfrontEmailComposerShowing:m}};t.default=Object(i.connect)(m,e=>({onOpen:(t,o)=>{e(((e,t)=>({type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t}))(t,o))},onClose:t=>{e({type:"CLOSE_POINTER_MESSAGE"}),e(Object(h.a)(t))},onConversationRead:t=>{e(Object(p.n)(c.b,t))},onComposerOrFormInputClick:t=>{e({type:"CLOSE_POINTER_MESSAGE"}),e(Object(h.a)(t)),e(Object(l.f)(t)),e(Object(p.l)(c.b,t))},onReactionSelect:(t,o)=>{e(Object(p.k)(c.b,t,o,!1))}}),s.b)(n.a)}}]);